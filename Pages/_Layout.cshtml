@using Microsoft.AspNetCore.Components.Web
@namespace CharityClinic.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phòng khám Kim Long</title>
    <base href="~/" />

    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
    <link href="css/site.css" rel="stylesheet" />
    <link href="CharityClinic.styles.css" rel="stylesheet" />
    @*<link href="/css/font-awesome.css" rel="stylesheet" type="text/css">*@
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="/css/mobile-menu.css" rel="stylesheet" type="text/css">
    <link href="/css/template.css" rel="stylesheet" type="text/css">
    @*<link href="/css/k2.css" rel="stylesheet" type="text/css">*@
    <link href="/css/gallery.css" rel="stylesheet" type="text/css">
    <link href="/css/animate.css" rel="stylesheet" type="text/css">
    <link href="css/presets_preset2.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/styles_style.css" rel="stylesheet" type="text/css">
    <style type="text/css">
        .container {
            max-width: 1170px
        }

        #sp-feature-wrapper {
            margin-top: 40px !important;
        }

        #sp-main-body-wrapper {
            background: rgba(246, 180, 74, 0) !important;
        }

        #sp-feature-wrapper {
            /*margin: margin-top: 40px; !important;*/
            margin-top: 40px !important;
        }

        #sp-main-body-wrapper {
            background: rgba(246, 180, 74, 0) !important;
        }
        .styles__sound_icon___23DuG {
            cursor: pointer;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
        }

            .styles__sound_icon___23DuG svg {
                width: 2rem;
                height: 2rem;
            }

        .styles__sound_icon_auto_width___EVA69 svg {
            width: auto;
            height: auto;
        }

        .styles__sound_icon___23DuG svg path {
            -webkit-transition: fill .5s;
            transition: fill .5s;
        }

        .styles__sound_active___2_Hr_ svg path {
            fill: #7AC70C;
        }

        div#bottom {
            background-color: cadetblue;
        }

        h3.time-title {
            background-color: cadetblue;
        }

        .hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas{
            top: 0px !important;
            width: 50%;
            position: fixed !important;
        }
    </style>
    <link rel="preload" href="/css/Admin/d86cfa61a4822fe0.css" as="style">
    <link rel="stylesheet" href="/css/Admin/d86cfa61a4822fe0.css" data-n-g="">
    <style type="text/css">
        .styles__sound_icon___23DuG {
            cursor: pointer;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
        }

            .styles__sound_icon___23DuG svg {
                width: 2rem;
                height: 2rem;
            }

        .styles__sound_icon_auto_width___EVA69 svg {
            width: auto;
            height: auto;
        }

        .styles__sound_icon___23DuG svg path {
            -webkit-transition: fill .5s;
            transition: fill .5s;
        }

        .styles__sound_active___2_Hr_ svg path {
            fill: #7AC70C;
        }
    </style>
    <link as="script" rel="prefetch" href="~/js/admin/layout-vertical-28c8a752c7acf9bc.js">
    <link as="script" rel="prefetch" href="~/js/admin/documentation-748b3644272ec101.js">
    <link as="script" rel="prefetch" href="~/js/admin/changelog-5b84daa3b1964549.js">
    <link href="/css/admin/apexcharts.css" rel="stylesheet" />
    <style>
        .ejoy-sub-active {
            color: #1296ba !important;
        }

        .ejoy-sub-hovered {
            color: #1296ba !important;
        }

        .ejoy-sub-clzz {
            cursor: pointer;
            lineHeight: 1.2;
            font-size: 28px;
            color: #FFCC00;
            background: rgba(17, 17, 17, 0.7);
        }

            .ejoy-sub-clzz:hover {
                color: #1296ba !important;
            }

        .ej-trans-sub {
            position: absolute;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999999;
            cursor: move;
        }

            .ej-trans-sub > span {
                color: #3CF9ED;
                font-size: 18px;
                text-align: center;
                padding: 0 16px;
                line-height: 1.5;
                background: rgba(32, 26, 25, 0.8);
                // text-shadow: 0px 1px 4px black;
                padding: 0 8px;
                lineHeight: 1.2;
                font-size: 16px;
                color: #0CB1C7;
                background: rgba(67, 65, 65, 0.7);
            }

        .ej-full-screen-video {
            position: absolute;
            width: 30px;
            height: 30px;
            top: 30px;
            right: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999999;
            cursor: pointer;
        }

        .ej-main-sub {
            position: absolute;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999999;
            cursor: move;
            padding: 0 8px;
        }

            .ej-main-sub > span {
                color: white;
                font-size: 20px;
                line-height: 1.5;
                text-align: center;
                background: rgba(32, 26, 25, 0.8);
                padding: 2px 8px;
                lineHeight: 1.2;
                font-size: 28px;
                color: #FFCC00;
                background: rgba(17, 17, 17, 0.7);
            }

            .ej-main-sub .ejoy-sub-clzz {
                background: transparent !important
            }

        .tran-subtitle > span {
            cursor: pointer;
            padding-left: 10px;
            top: 2px;
            position: relative;
        }

            .tran-subtitle > span > span {
                position: absolute;
                top: -170%;
                background: rgba(0,0,0,0.5);
                font-size: 13px;
                line-height: 20px;
                padding: 2px 8px;
                color: white;
                display: none;
                border-radius: 4px;
                white-space: nowrap;
                left: -50%;
                font-weight: normal;
            }

        .viewPopupPro {
            z-index: 2147483647;
            cursor: auto;
            position: absolute;
            z-index: 2147483647;
            background: #111111;
            transition: opacity 1s;
            width: 172px;
            height: 66px;
            opacity: 1;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .titlePopupPro {
            font-style: normal;
            font-weight: 400;
            font-size: 10px;
            line-height: 12px;
            color: #E5E5E5;
            text-shadow: 0px 3px 3px rgba(0, 0, 0, 0.25);
        }

        .viewGoPro {
            background: #FFCC00;
            border-radius: 72.6257px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 8px;
            padding-left: 10px;
            cursor: pointer;
        }

            .viewGoPro svg {
                pointer-events: none;
            }

        .textGoPro {
            font-style: normal;
            font-weight: 600;
            font-size: 10px;
            line-height: 12px;
            pointer-events: none;
            text-align: center;
            color: #FFFFFF;
            padding: 4px 14px 4px 4px;
        }

        .viewPopupPro {
            top: auto !important;
            bottom: 15px !important;
        }

        .view-icon-copy-main-sub:hover > span,
        .view-icon-edit-sub:hover > span,
        .view-icon-exit-full-sub:hover > span,
        .view-icon-full-sub:hover > span,
        .iconCrownGoPro:hover > span,
        .view-icon-copy-tran-sub:hover > span {
            display: block;
        }

        .iconCrownGoPro {
            padding-left: 0px !important;
            padding-right: 8px !important;
        }

            .iconCrownGoPro svg {
                width: 17px;
                height: 17px;
            }

        .view-icon-full-sub, .view-icon-exit-full-sub {
            display: flex;
        }

            .view-icon-full-sub > svg, .view-icon-exit-full-sub > svg {
                pointer-events: none;
            }

        .tran-subtitle > span > svg {
            width: 16px;
            height: 16px;
            pointer-events: none;
            display: inline-flex !important;
            vertical-align: baseline !important;
        }

        .view-icon-copy-main-sub > svg {
            pointer-events: none;
            color: #FFCC00
        }

        .iconCrownGoPro {
            padding-left: 0 !important;
            padding-right: 8px !important;
        }

        .view-icon-copy-tran-sub > svg {
            pointer-events: none;
            color: #0CB1C7
        }

        .navbar-vertical.navbar {
            position: fixed;
        }

    </style>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css" data-n-g="">
    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">*@
    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
</head>
<body>
    @RenderBody()

    @*<div id="blazor-error-ui">
        <environment include="Staging,Production">
            An error has occurred. This application may no longer respond until reloaded.
        </environment>
        <environment include="Development">
            An unhandled exception has occurred. See browser dev tools for details.
        </environment>
        <a href="" class="reload">Reload</a>
        <a class="dismiss">🗙</a>
    </div>*@

    @*<script src="https://connect.facebook.net/vi_VN/sdk.js?hash=63209189b35f8230c9f4b49bcb0c2718" async="" crossorigin="anonymous"></script>*@
    @*<script src="https://www.tutorialspoint.com/jquery/jquery-3.6.0.js"></script>*@
    @*<script src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
            crossorigin="anonymous"></script>*@
    
    <script src="/js/jquery-3.7.1.min.js"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/script.js" type="text/javascript"></script>
    @*<script src="/js/kenburns_script.js" type="text/javascript"></script>*@
    @*<script type="text/javascript">
        jQuery.noConflict();
    </script>*@
    <script src="/js/jquery-migrate-1.4.1.min.js"></script>
    <script src="/js/k2.frontend.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery.noConflict();
        var spnoConflict = jQuery.noConflict();
    </script>
    <script src="/js/modernizr-2.6.2.min.js" type="text/javascript"></script>
    <script src="/js/helix.core.js" type="text/javascript"></script>
    <script src="/js/menu.js" type="text/javascript"></script>
    <script src="/js/jquery.touchSwipe.min.js" type="text/javascript"></script>
    <script src="/js/wow.js" type="text/javascript"></script>
    <script src="~/js/action.js"></script>
    <script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&amp;version=v14.0" nonce="6qe2zHcR"></script>

    <noscript data-n-css=""></noscript>
    <script src="/js/admin/polyfills-c67a75d1b6f99dc8.js"></script>
    <script src="/js/admin/webpack-9e5829f83ed1b4ac.js"></script>
    <script src="/js/admin/framework-3671d8951bf44e4e.js" defer=""></script>
    <script src="/js/admin/main-5113a160e7884232.js" defer=""></script>
    <script src="/js/admin/_app-979549b46b89f45a.js" defer=""></script>
    <script src="/js/admin/5726-d678d89665b6e8dd.js" defer=""></script>
    <script src="/js/admin/8213-34c3ed23a2198c74.js" defer=""></script>
    <script src="/js/admin/7399-881c2c69295abbf2.js" defer=""></script>
    <script src="/js/admin/index-fb493c9913e30bb0.js" defer=""></script>
    <script src="/js/admin/_buildManifest.js" defer=""></script>
    <script src="/js/admin/_ssgManifest.js" defer=""></script>
    <script src="/js/admin/tinymce.min.js"></script>
    @*<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>*@
    <script>
        function readFileAsByteArray(file) {
            
            const reader = new FileReader();

            reader.onload = () => {
                const arrayBuffer = reader.result;
                const bytes = new Uint8Array(arrayBuffer);
                resolve(bytes);
            };

            reader.onerror = () => {
                reject(reader.error);
            };

            return reader.readAsArrayBuffer(file);
            
        }
        function init(path) {
            tinymce.init({
                selector: '#Content',
                plugins: 'image code',
                toolbar: 'undo redo | link image | code',
                /* enable title field in the Image dialog*/
                image_title: true,
                /* enable automatic uploads of images represented by blob or data URIs*/
                automatic_uploads: true,
                /*
                  URL of our upload handler (for more details check: https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_url)
                  images_upload_url: 'postAcceptor.php',
                  here we add custom filepicker only to Image dialog
                */
                file_picker_types: 'image',
                /* and here's our custom image picker*/
                file_picker_callback: function (cb, value, meta) {
                    var input = document.createElement('input');
                    input.setAttribute('type', 'file');
                    input.setAttribute('accept', 'image/*');

                    /*
                      Note: In modern browsers input[type="file"] is functional without
                      even adding it to the DOM, but that might not be the case in some older
                      or quirky browsers like IE, so you might want to add it to the DOM
                      just in case, and visually hide it. And do not forget do remove it
                      once you do not need it anymore.
                    */

                    input.onchange = function () {
                        debugger;
                        var file = this.files[0];
                        var formData = new FormData();
                        formData.append('file', file);
                        formData.append('path', path);

                        $.ajax({
                            url: '/FileProcess', // Replace with the actual Razor Page's URL
                            type: 'POST',
                            data: formData,
                            processData: false,
                            contentType: false,
                            success: function (response) {
                                // Handle the response from the server
                                console.log(response);
                                tinymce.get('Content').execCommand('insertHTML', false, `<img src="/${response}" alt="image" />`);
                                $('.tox-button.tox-button--secondary')[0].click()
                            },
                            error: function (xhr) {
                                // Handle error
                                console.log(xhr.responseText);
                            }
                        });

                        //var reader = new FileReader();
                        //reader.onload = function () {
                        //    /*
                        //      Note: Now we need to register the blob in TinyMCEs image blob
                        //      registry. In the next release this part hopefully won't be
                        //      necessary, as we are looking to handle it internally.
                        //    */
                        //    var id = 'blobid' + (new Date()).getTime();
                        //    var blobCache = tinymce.activeEditor.editorUpload.blobCache;
                        //    var base64 = reader.result.split(',')[1];
                        //    var blobInfo = blobCache.create(id, file, base64);
                        //    blobCache.add(blobInfo);

                        //    /* call the callback and populate the Title field with the file name */
                        //    cb(blobInfo.blobUri(), { title: file.name });
                        //};
                        //reader.readAsDataURL(file);
                    };

                    input.click();
                },
                content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
            });
        }
        function getContent(){
            return tinymce.get("Content").getContent();
        }

        function setContent(new_str){
            return tinymce.get("Content").setContent(new_str);
        }

        init();
    </script>
    @*<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>*@
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script>
        function DataTable() {
            jQuery('#myTable').DataTable();
        }
        function WinLoad(url) {
            window.location.href = url;
        }
        function defaultLayout(){
            jQuery(".navbar-vertical.navbar").css("margin", '0px 0px 0px -250px');
        }
        function changeMainLayout() {
            jQuery('#changeMainLayout').on("click", function () {
                if (jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height") == '625px') {
                    jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height", '0px');
                }
                else
                    jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height", '625px');
            })
            jQuery('.hidden-desktop.btn.btn-primary.vina-menu-small').on("click", function () {
                if (jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height") == '625px') {
                    jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height", '0px');
                }
                else
                    jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height", '625px');
            })
            jQuery(".hidden-desktop.sp-mobile-menu.nav-collapse.collapse.sidebar-offcanvas").css("height", '0px');
        }

        function ChangeLayout() {
            if (jQuery(".navbar-vertical.navbar").css("margin") == '0px 0px 0px -238px') {
                jQuery(".navbar-vertical.navbar").css("margin", "auto");
                jQuery("div#page-content").css("margin-left", "17.85rem");
            }else{
                jQuery(".navbar-vertical.navbar").css("margin", "revert-layer");
                jQuery("div#page-content").css("margin-left", "");

            }
        }

        function LoadImage() {
            document.getElementById('file-input').addEventListener('change', (e) => {
                if (e.target.files.length) {
                    const src = URL.createObjectURL(e.target.files[0]);
                    console.log(src, "hoang")
                    document.getElementById('img-preview').src = src;
                }
            });
        }
        window.downloadFileFromStream = async (fileName, contentStreamReference) => {
            const arrayBuffer = await contentStreamReference.arrayBuffer();
            const blob = new Blob([arrayBuffer]);
            const url = URL.createObjectURL(blob);
            const anchorElement = document.createElement('a');
            anchorElement.href = url;
            anchorElement.download = fileName ?? '';
            anchorElement.click();
            anchorElement.remove();
            URL.revokeObjectURL(url);
        }
        function hiddenBackDrop() {
            $('.modal-backdrop.fade.in').click(e => {
                $('body').removeClass('modal-open');
                $('.modal-backdrop').remove();
            })
        }
    </script>
    <script src="_framework/blazor.server.js"></script>
</body>
</html>
